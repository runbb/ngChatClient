<ActionBar title="My App"></ActionBar>

<TabView selectedIndex="0">
    <StackLayout *tabItem="{title: 'الدخول',  iconSource: 'res://logo_white_bg'}">
        <label text="الخادم" class="message"></label>
        <TextField id="serverip" [text]="server" class="message"></TextField>
        <label text="اسم المستخدم" class="message"></label>
        <TextField id="username" text="" class="message"></TextField>
        <label text="كلمة السر" class="message"></label>
        <TextField id="password" text="" secure="true" class="message"></TextField>
        <button text="تسجيل الدخول" (tap)="connection()"></button>
    </StackLayout>
    <GridLayout rows="*,50" *tabItem="{title: 'الدردشة', iconSource: 'res://logo_white_bg'}">
        <ListView row="0" id="listMessages" [items]="messages" >
            <template let-item="item">
                <StackLayout>
                    <GridLayout columns="50,auto,*" style="vertical-align: center;">
                        <image col="0" class="message" [src]='item.avatar' height="50"></image>
                        <image col="1" [src]='item.power' height="25" width="auto"></image>
                        <button col="2" [text]='item.from' class="btn" [style]='"background-color:" + item.background + ";color:" + item.color + ";"'></button>
                    </GridLayout>
                    <label [text]='item.message' textWrap="true" class="btn message" [style]='"color:" + item.messageColor + ";"'></label>
                </StackLayout>
            </template>
        </ListView>
        <GridLayout row="1" columns="100,*">
            <button col="0" text="ارسال" (tap)="sendMessage()"></button>
            <TextField  col="1" id="messageinput" returnKeyType="send"  (returnPress)="sendMessage()" height="100"></TextField>
        </GridLayout>
    </GridLayout>
    <GridLayout rows="50,*" *tabItem="{title: 'الحائط', iconSource: 'res://logo_white_bg'}">
        <GridLayout row="0" columns="100,*">
            <button col="0" text="ارسال" (tap)="sendBroadcast()"></button>
            <TextField  col="1" id="broadcastinput" returnKeyType="send"  (returnPress)="sendBroadcast()" height="100"></TextField>
        </GridLayout>
        <ListView row="1" id="listBroadcast" [items]="broadcasts" >
            <template let-item="item">
                <StackLayout>
                    <GridLayout columns="50,auto,*" style="vertical-align: center;">
                        <image col="0" class="message" [src]='item.avatar' height="50"></image>
                        <image col="1" [src]='item.power' height="25" width="auto"></image>
                        <button col="2" [text]='item.from' class="btn" [style]='"background-color:" + item.background + ";color:" + item.color + ";"'></button>
                    </GridLayout>
                    <label [text]='item.message' textWrap="true" class="btn message" [style]='"color:" + item.messageColor + ";"'></label>
                </StackLayout>
            </template>
        </ListView>
    </GridLayout>
    <StackLayout rows="*" *tabItem="{title: 'الأشعارات', iconSource: 'res://logo_white_bg'}">
        <ListView row="0" id="listNotifications" [items]="notifications" >
            <template let-item="item">
                <StackLayout>
                    <GridLayout columns="50,*" rows="*">
                        <image row="0" col="0" class="message" [src]='item.image' height="50"></image>
                        <label row="0" col="1" textWrap="true" [text]='item.message' textWrap="true" class="message" style="vertical-align: center;text-align: center;"></label>
                    </GridLayout>
                </StackLayout>
            </template>
        </ListView>
    </StackLayout>
    <GridLayout rows="*" *tabItem="{title: 'المتصلين', iconSource: 'res://logo_white_bg'}">
        <ListView row="0" id="listonline" [items]="users" >
            <template let-item="item">
                <StackLayout>
                    <GridLayout columns="50,*">
                        <image col="0" class="message" [src]='server+item.pic' height="50"></image>
                        <button col="1" [text]='item.topic' class="btn" [style]='"background-color:" + item.bg + ";color:" + item.ucol + ";"'></button>
                    </GridLayout>
                    <label [text]='item.msg' textWrap="true" class="message" [style]='"color:" + item.mcol + ";"'></label>
                </StackLayout>
            </template>
        </ListView>
    </GridLayout>
</TabView>